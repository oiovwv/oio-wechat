"use strict";var app=getApp(),bmap=require("../../utils/bmap-wx");Page({data:{title:"Index page",userInfo:{},weatherData:"",weatherText:["当前城市","PM2.5","日期","温度","天气","风力"],zsIcon:["icon-chuanyikunhuo","icon-xiche","icon-ganmaozhishu","icon-yundong","icon-ziwaixian"]},chooseCity:function(){var o=this,n={success:function(n){var e=n.longitude+","+n.latitude;o.Bmap(o,e)},cancel:function(o){console.log(o)},fail:function(o){console.log(o)}};wx.chooseLocation(n)},Bmap:function(o,n){var e=new bmap.BMapWX({ak:"mIjA3xq45izQn0ej132vqufm3FAvOy4G"}),a=function(o){},t=function(n){console.log(n),console.log(1);var e=n.currentWeather[0],a=n.originalData.results[0],t={},c=o.data.weatherText,i=0;for(var l in e)t[l]=c[i++];o.setData({weatherData:e,weatherAll:a,name:t})};e.weather({fail:a,success:t,location:n||null})},onLoad:function(){var o=this,n=this;app.getUserInfo().then(function(n){return o.setData({userInfo:n})}).catch(console.info),n.Bmap(n)},onReady:function(){console.log(" ---------- onReady ----------")},onShow:function(){console.log(" ---------- onShow ----------")},onHide:function(){console.log(" ---------- onHide ----------")},onUnload:function(){console.log(" ---------- onUnload ----------")},onPullDownRefresh:function(){console.log(" ---------- onPullDownRefresh ----------")}});
//# sourceMappingURL=index.js.map
